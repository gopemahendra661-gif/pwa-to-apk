<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Website to APK Converter</title>
<style>
body{font-family:sans-serif;text-align:center;padding:50px;background:#141E30;color:white;}
input,button{padding:10px;margin:5px;border-radius:8px;border:none;}
button{background:#00c6ff;cursor:pointer;}
</style>
</head>
<body>
<h1>ğŸŒ Website to APK Converter</h1>
<input type="url" id="url" placeholder="à¤…à¤ªà¤¨à¥€ à¤µà¥‡à¤¬à¤¸à¤¾à¤‡à¤Ÿ à¤•à¤¾ URL à¤¡à¤¾à¤²à¥‡à¤‚" size="40">
<button onclick="convert()">Convert</button>
<p id="result"></p>

<script>
function convert(){
  const url = document.getElementById('url').value.trim();
  if(!url){alert("à¤•à¥ƒà¤ªà¤¯à¤¾ URL à¤¡à¤¾à¤²à¥‡à¤‚!"); return;}
  document.getElementById('result').innerHTML = "â³ Workflow trigger à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...";

  // âš ï¸ Direct token in frontend is unsafe
  // à¤‡à¤¸ à¤œà¤—à¤¹ à¤†à¤ª server-side proxy use à¤•à¤°à¥‡à¤‚ à¤œà¥‹ token secretly handle à¤•à¤°à¥‡
  fetch('/trigger-workflow', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ manifest: url + "/manifest.json" })
  })
  .then(res => res.json())
  .then(data => {
    if(data.success){
      document.getElementById('result').innerHTML = 
        "âœ… Workflow triggered! GitHub Actions â†’ Artifacts à¤¸à¥‡ APK à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚à¥¤";
    } else {
      document.getElementById('result').innerText = "âŒ Error: "+data.error;
    }
  })
  .catch(()=> document.getElementById('result').innerText = "âš ï¸ Network Error");
}
</script>
</body>
</html>
